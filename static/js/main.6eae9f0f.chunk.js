(this.webpackJsonpmoonlit=this.webpackJsonpmoonlit||[]).push([[0],{114:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);var c,o,a=n(0),r=n.n(a),i=n(31),s=n.n(i),l=(n(114),n(12)),u=n(195),j=n(200),d=n(192),b=n(193),h=n(196),O=n(198),x=n(199),g=n(55),p=n(2),f=function(e){var t=Object(g.useGoogleLogout)({clientId:"391415236751-30bjtlsn5mifvrq6t4f4n7janqa343e6.apps.googleusercontent.com",onLogoutSuccess:function(t){e.loginUser({}),window.location.reload()},onFailure:function(){console.error("LOGOUT FAILED!!!")}}).signOut;return Object(p.jsx)(h.a,{position:"sticky",sx:{backgroundColor:"#37425B",padding:"0.25em"},children:Object(p.jsxs)(O.a,{children:[Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"row",flex:1},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(x.a,{variant:"h3",sx:{margin:0},children:"Moonlit"}),Object(p.jsx)(x.a,{variant:"subtitle1",sx:{margin:0,color:"#FFD700"},children:"To the moon, To the stars..."})]}),Object(p.jsx)(j.a,{variant:"determinate",value:e.updateProgress,sx:{marginTop:"auto",marginBottom:"auto"}})]}),(!e.user||0!==Object.keys(e.user).length)&&Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly",alignItems:"center"},children:[Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[Object(p.jsxs)(x.a,{variant:"overline",sx:{margin:0},children:["Hello, ",e.user.name||""]}),Object(p.jsx)(d.a,{size:"small",sx:{margin:0},onClick:t,children:"LOGOUT"})]}),Object(p.jsx)(b.a,{src:e.user.picture.substring(0,e.user.picture.length-6),sx:{marginLeft:"1em",height:"2.5em",width:"2.5em"}})]})]})})},m=n(27),v=n.n(m),k=n(90),y=n(20),C=n.n(y),w=n(38),F=n(92),S=n.n(F),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://moonlit-api.herokuapp.com/"+e},I=function(e){var t=Object(g.useGoogleLogin)({onSuccess:function(t){var n=function(){var n=Object(w.a)(C.a.mark((function n(){var c;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(c=new FormData).set("token_id",t.tokenId),n.prev=2,n.next=5,v.a.post(D(),c).then((function(t){e.loginUser(t.data),console.log(t.data)}));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(){return n.apply(this,arguments)}}();n(),function(e){var t=1e3*(e.tokenObj.expires_in||3300),n=function(){var c=Object(w.a)(C.a.mark((function c(){var o;return C.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,e.reloadAuthResponse();case 2:o=c.sent,t=1e3*(o.expires_in||3300),setTimeout(n,t);case 5:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();setTimeout(n,t)}(t)},onFailure:function(e){console.log("LOGIN FAILED"),console.log(e)},clientId:"391415236751-30bjtlsn5mifvrq6t4f4n7janqa343e6.apps.googleusercontent.com",isSignedIn:!0,cookiePolicy:"single_host_origin"}),n=t.signIn;return Object(p.jsxs)(u.a,{children:[Object(p.jsx)(x.a,{variant:"h3",color:"#FFFFFF",children:"Welcome to Moonlit!"}),Object(p.jsx)(x.a,{variant:"subtitle1",color:"#FFFFFF",children:"A place to keep track of all of your stocks."}),Object(p.jsxs)(d.a,{onClick:n,size:"large",variant:"contained",children:[Object(p.jsx)(S.a,{sx:{marginRight:"0.5em"}}),"Login With Google"]})]})},L=n(194),T=n(23),E=n(201),U=n(202),_=n(181),A=n(93),N=n.n(A),R=Object(_.a)(x.a)(c||(c=Object(T.a)(["\n  color: ",";\n"])),(function(e){return e.pricechange>=0?"#18BC9D":"#DF9DC1"})),z=function(e){return Object(p.jsxs)(E.a,{sx:{backgroundColor:"#1D6988",color:"white",textShadow:"1px 1px #333333",width:"100vw",maxWidth:"220px",padding:"1em",position:"relative"},children:[Object(p.jsx)(x.a,{variant:"h4",children:e.ticker}),Object(p.jsx)(x.a,{variant:"caption",children:e.name}),Object(p.jsxs)(R,{variant:"h6",pricechange:e.priceChange,children:["$",e.currentPrice.toFixed(2)||0," (",e.priceChange>0?"+$"+e.priceChange.toFixed(2):"-$"+(-1*e.priceChange).toFixed(2),")"]}),Object(p.jsx)(U.a,{size:"small",color:"secondary","aria-label":"remove-stock",sx:{position:"absolute",top:10,right:10},onClick:function(){e.removeStock(e.id)},children:Object(p.jsx)(N.a,{})})]})},G=n(5),B=n(187),P=n(28),q=n(94),M=n(186),W=n(188),J=n(191),$=n(189),H=n(203),K=n(95),Q=n.n(K),V=Object(_.a)(B.a)((o={},Object(G.a)(o,"& .".concat(P.a.root," .").concat(P.a.notchedOutline),{borderColor:"white"}),Object(G.a)(o,"&:hover .".concat(P.a.root," .").concat(P.a.notchedOutline),{borderColor:"white"}),Object(G.a)(o,"& .".concat(P.a.root,".").concat(P.a.focused," .").concat(P.a.notchedOutline),{borderColor:"white"}),Object(G.a)(o,"& .".concat(P.a.input),{color:"white"}),Object(G.a)(o,"&:hover .".concat(P.a.input),{color:"white"}),Object(G.a)(o,"& .".concat(P.a.root,".").concat(P.a.focused," .").concat(P.a.input),{color:"white"}),Object(G.a)(o,"& .".concat(q.a.outlined),{color:"white"}),Object(G.a)(o,"&:hover .".concat(q.a.outlined),{color:"white"}),Object(G.a)(o,"& .".concat(q.a.outlined,".").concat(q.a.focused),{color:"white"}),o)),X=function(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),c=n[0],o=n[1],r=Object(a.useState)(""),i=Object(l.a)(r,2),s=i[0],j=i[1],b=Object(a.useState)(!1),h=Object(l.a)(b,2),O=h[0],x=h[1],g=Object(a.useState)(!1),f=Object(l.a)(g,2),m=f[0],k=f[1],y=Object(a.useState)(!1),F=Object(l.a)(y,2),S=F[0],I=F[1],L=function(){k(!1)},T=function(){var t=Object(w.a)(C.a.mark((function t(){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),(n=new FormData).set("ticker",s),n.set("user_id",e.user.sub),t.next=6,v.a.post(D("/add"),n).then((function(t){"string"!==typeof t.data?(e.newTicker(t.data),I(!0)):I(!1),x(!1)}));case 6:k(!0),j("");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=Boolean(c),_=c?"simple-popover":void 0;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(M.a,{title:"Add Stock",children:Object(p.jsx)(U.a,{size:"medium",color:"primary","aria-label":"add-stock",sx:{position:"fixed",right:20,bottom:20},onClick:function(e){o(e.currentTarget)},children:Object(p.jsx)(Q.a,{})})}),Object(p.jsx)(W.a,{id:_,anchorEl:c,open:E,onClose:function(){o(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:Object(p.jsx)(u.a,{sx:{backgroundColor:"#343435",color:"white",padding:"1em 2em",display:"flex",flexDirection:"column"},children:Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(p.jsx)(V,{id:"outlined-basic",label:"Enter Stock Ticker",variant:"outlined",value:s,disabled:O,onChange:function(e){j(e.target.value)},sx:{marginRight:"1em"},onKeyDown:function(e){"Enter"===e.key&&T()}}),Object(p.jsx)(d.a,{variant:"outlined",disabled:O,onClick:T,children:"Add Stock"})]})})}),Object(p.jsx)(J.a,{open:m,onClose:L,autoHideDuration:5e3,children:S?Object(p.jsxs)($.a,{onClose:L,severity:"success",children:[Object(p.jsx)(H.a,{children:"SUCCESS!!!"}),"Stock was successfully added!"]}):Object(p.jsxs)($.a,{onClose:L,severity:"error",children:[Object(p.jsx)(H.a,{children:"ERROR!!!"}),"Stock was NOT FOUND!"]})})]})},Y=function(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),c=n[0],o=n[1],r=Object(a.useState)(!0),i=Object(l.a)(r,2),s=i[0],j=i[1],d=function(){var t=new FormData;t.set("user_id",e.user.sub),v.a.post(D("/update"),t).then((function(t){console.log(t.data),o(t.data),t.data.length>0&&e.resetCounter(),j(!1)})).catch((function(e){console.error(e)}))},b=function(t){var n=new FormData;n.set("user_id",e.user.sub),n.set("ticker",c[t].ticker),o((function(e){return e.splice(t,1),e})),v.a.post(D("/remove"),n)};return Object(a.useEffect)((function(){d(),setInterval(d,"45000")}),[]),s?Object(p.jsx)(u.a,{sx:{color:"#FFFFFF",textAlign:"center"},children:Object(p.jsx)(x.a,{variant:"h5",children:"Loading stocks..."})}):Object(p.jsxs)(L.a,{container:!0,spacing:2,justifyContent:"center",children:[c.map((function(e,t){return Object(p.jsx)(L.a,{item:!0,children:Object(p.jsx)(z,{id:t,ticker:e.ticker,name:e.name,currentPrice:e.price,priceChange:e.change,removeStock:b})},t)})),0===c.length&&Object(p.jsxs)(u.a,{sx:{color:"#aaaaaa"},children:[Object(p.jsx)(x.a,{variant:"h4",children:"Nothing here!"}),Object(p.jsx)(x.a,{variant:"overline",children:"Try adding some stocks using the button in the bottom right!"})]}),Object(p.jsx)(X,{user:e.user,newTicker:function(e){o(e),d()}})]})},Z=function(e){return e.isLoggedIn?Object(p.jsx)(Y,{user:e.user,resetCounter:e.resetCounter}):Object(p.jsx)(I,{loginUser:e.loginUser})},ee=function(){var e=Object(a.useState)(!0),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(0),r=Object(l.a)(o,2),i=r[0],s=r[1],j=Object(a.useState)({}),d=Object(l.a)(j,2),b=d[0],h=d[1];Object(k.a)(v.a,{retries:999,retryDelay:function(e){return 1e3*e}});var O=function(){s((function(e){return e<100?e+=5:e}))},g=null,m=function(e){h(e)};return Object(a.useEffect)((function(){v.a.get(D()).then((function(e){console.log("CONNECTED!"),console.log(e.data),c(!1)})).catch((function(e){console.error(e)}))}),[]),n?Object(p.jsx)("h1",{children:"Loading..."}):Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(f,{updateProgress:i,user:b,isLoggedIn:!b||0!==Object.keys(b).length,loginUser:m}),Object(p.jsxs)(u.a,{maxWidth:"none",sx:{paddingTop:"2em"},children:[Object(p.jsx)(Z,{isLoggedIn:!b||0!==Object.keys(b).length,loginUser:m,user:b,resetCounter:function(){null!==g&&(clearInterval(g),g=null),s(10),g=setInterval(O,2250)}}),Object(p.jsx)("div",{style:{position:"fixed",bottom:5,color:"#aaaaaa"},children:Object(p.jsxs)(x.a,{variant:"overline",children:["\xa9 2021 John Mabanta \xb7"," ",Object(p.jsx)("a",{href:"https://github.com/jmmabanta/moonlit",target:"_blank",rel:"noreferrer",style:{color:"#aaaaaa"},children:"SOURCE CODE"})]})})]})]})};s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(ee,{})}),document.getElementById("root"))}},[[139,1,2]]]);
//# sourceMappingURL=main.6eae9f0f.chunk.js.map