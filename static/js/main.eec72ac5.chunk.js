(this.webpackJsonpmoonlit=this.webpackJsonpmoonlit||[]).push([[0],{115:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);var o,c,r=n(0),a=n.n(r),i=n(31),s=n.n(i),l=(n(115),n(12)),u=n(195),j=n(200),d=n(192),h=n(193),b=n(196),O=n(197),p=n(198),x=n(54),g=n(2),f=function(e){var t=Object(x.useGoogleLogout)({clientId:"391415236751-30bjtlsn5mifvrq6t4f4n7janqa343e6.apps.googleusercontent.com",onLogoutSuccess:function(t){e.loginUser({}),window.location.reload()},onFailure:function(){console.error("LOGOUT FAILED!!!")}}).signOut;return Object(g.jsx)(b.a,{position:"sticky",sx:{backgroundColor:"#37425B",padding:"0.25em"},children:Object(g.jsxs)(O.a,{children:[Object(g.jsxs)("div",{style:{display:"flex",flexDirection:"row",flex:1},children:[Object(g.jsxs)("div",{children:[Object(g.jsx)(p.a,{variant:"h3",sx:{margin:0},children:"Moonlit"}),Object(g.jsx)(p.a,{variant:"subtitle1",sx:{margin:0,color:"#FFD700"},children:"To the moon, To the stars..."})]}),Object(g.jsx)(j.a,{variant:"determinate",value:e.updateProgress,sx:{marginTop:"auto",marginBottom:"auto"}})]}),(!e.user||0!==Object.keys(e.user).length)&&Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly",alignItems:"center"},children:[Object(g.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[Object(g.jsxs)(p.a,{variant:"overline",sx:{margin:0},children:["Hello, ",e.user.name||""]}),Object(g.jsx)(d.a,{size:"small",sx:{margin:0},onClick:t,children:"LOGOUT"})]}),Object(g.jsx)(h.a,{src:e.user.picture.substring(0,e.user.picture.length-6),sx:{marginLeft:"1em",height:"2.5em",width:"2.5em"}})]})]})})},m=n(27),v=n.n(m),k=n(91),w=n(20),y=n.n(w),C=n(37),F=n(93),S=n.n(F),D=function(e){var t=Object(x.useGoogleLogin)({onSuccess:function(t){var n=function(){var n=Object(C.a)(y.a.mark((function n(){var o;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(o=new FormData).set("token_id",t.tokenId),n.prev=2,n.next=5,v.a.post("https://moonlit-api.herokuapp.com/",o).then((function(t){e.loginUser(t.data),console.log(t.data)}));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(){return n.apply(this,arguments)}}();n(),function(e){var t=1e3*(e.tokenObj.expires_in||3300),n=function(){var o=Object(C.a)(y.a.mark((function o(){var c;return y.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.reloadAuthResponse();case 2:c=o.sent,t=1e3*(c.expires_in||3300),setTimeout(n,t);case 5:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();setTimeout(n,t)}(t)},onFailure:function(e){console.log("LOGIN FAILED"),console.log(e)},clientId:"391415236751-30bjtlsn5mifvrq6t4f4n7janqa343e6.apps.googleusercontent.com",isSignedIn:!0,cookiePolicy:"single_host_origin"}),n=t.signIn;return Object(g.jsxs)(u.a,{children:[Object(g.jsx)(p.a,{variant:"h3",color:"#FFFFFF",children:"Welcome to Moonlit!"}),Object(g.jsx)(p.a,{variant:"subtitle1",color:"#FFFFFF",children:"A place to keep track of all of your stocks."}),Object(g.jsxs)(d.a,{onClick:n,size:"large",variant:"contained",children:[Object(g.jsx)(S.a,{sx:{marginRight:"0.5em"}}),"Login With Google"]})]})},I=n(194),L=n(23),T=n(201),E=n(202),U=n(181),A=n(94),_=n.n(A),N=Object(U.a)(p.a)(o||(o=Object(L.a)(["\n  color: ",";\n"])),(function(e){return e.pricechange>=0?"#18BC9D":"#DF9DC1"})),z=function(e){return Object(g.jsxs)(T.a,{sx:{backgroundColor:"#1D6988",color:"white",textShadow:"1px 1px #333333",width:"100vw",maxWidth:"220px",padding:"1em",position:"relative"},children:[Object(g.jsx)(p.a,{variant:"h4",children:e.ticker}),Object(g.jsx)(p.a,{variant:"caption",children:e.name}),Object(g.jsxs)(N,{variant:"h6",pricechange:e.priceChange,children:["$",e.currentPrice.toFixed(2)||0," (",e.priceChange>0?"+$"+e.priceChange.toFixed(2):"-$"+(-1*e.priceChange).toFixed(2),")"]}),Object(g.jsx)(E.a,{size:"small",color:"secondary","aria-label":"remove-stock",sx:{position:"absolute",top:10,right:10},onClick:function(){e.removeStock(e.id)},children:Object(g.jsx)(_.a,{})})]})},G=n(5),R=n(187),B=n(28),P=n(95),q=n(186),W=n(188),M=n(191),$=n(189),H=n(203),J=n(96),K=n.n(J),Q=Object(U.a)(R.a)((c={},Object(G.a)(c,"& .".concat(B.a.root," .").concat(B.a.notchedOutline),{borderColor:"white"}),Object(G.a)(c,"&:hover .".concat(B.a.root," .").concat(B.a.notchedOutline),{borderColor:"white"}),Object(G.a)(c,"& .".concat(B.a.root,".").concat(B.a.focused," .").concat(B.a.notchedOutline),{borderColor:"white"}),Object(G.a)(c,"& .".concat(B.a.input),{color:"white"}),Object(G.a)(c,"&:hover .".concat(B.a.input),{color:"white"}),Object(G.a)(c,"& .".concat(B.a.root,".").concat(B.a.focused," .").concat(B.a.input),{color:"white"}),Object(G.a)(c,"& .".concat(P.a.outlined),{color:"white"}),Object(G.a)(c,"&:hover .".concat(P.a.outlined),{color:"white"}),Object(G.a)(c,"& .".concat(P.a.outlined,".").concat(P.a.focused),{color:"white"}),c)),V=function(e){var t=Object(r.useState)(null),n=Object(l.a)(t,2),o=n[0],c=n[1],a=Object(r.useState)(""),i=Object(l.a)(a,2),s=i[0],j=i[1],h=Object(r.useState)(!1),b=Object(l.a)(h,2),O=b[0],p=b[1],x=Object(r.useState)(!1),f=Object(l.a)(x,2),m=f[0],k=f[1],w=Object(r.useState)(!1),F=Object(l.a)(w,2),S=F[0],D=F[1],I=function(){k(!1)},L=function(){var t=Object(C.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),(n=new FormData).set("ticker",s),n.set("user_id",e.user.sub),t.next=6,v.a.post("https://moonlit-api.herokuapp.com//add",n).then((function(t){"string"!==typeof t.data?(e.newTicker(t.data),D(!0)):D(!1),p(!1)}));case 6:k(!0),j("");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=Boolean(o),U=o?"simple-popover":void 0;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(q.a,{title:"Add Stock",children:Object(g.jsx)(E.a,{size:"medium",color:"primary","aria-label":"add-stock",sx:{position:"fixed",right:20,bottom:20},onClick:function(e){c(e.currentTarget)},children:Object(g.jsx)(K.a,{})})}),Object(g.jsx)(W.a,{id:U,anchorEl:o,open:T,onClose:function(){c(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:Object(g.jsx)(u.a,{sx:{backgroundColor:"#343435",color:"white",padding:"1em 2em",display:"flex",flexDirection:"column"},children:Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(g.jsx)(Q,{id:"outlined-basic",label:"Enter Stock Ticker",variant:"outlined",value:s,disabled:O,onChange:function(e){j(e.target.value)},sx:{marginRight:"1em"},onKeyDown:function(e){"Enter"===e.key&&L()}}),Object(g.jsx)(d.a,{variant:"outlined",disabled:O,onClick:L,children:"Add Stock"})]})})}),Object(g.jsx)(M.a,{open:m,onClose:I,autoHideDuration:5e3,children:S?Object(g.jsxs)($.a,{onClose:I,severity:"success",children:[Object(g.jsx)(H.a,{children:"SUCCESS!!!"}),"Stock was successfully added!"]}):Object(g.jsxs)($.a,{onClose:I,severity:"error",children:[Object(g.jsx)(H.a,{children:"ERROR!!!"}),"Stock was NOT FOUND!"]})})]})},X=function(e){var t=Object(r.useState)([]),n=Object(l.a)(t,2),o=n[0],c=n[1],a=Object(r.useState)(!0),i=Object(l.a)(a,2),s=i[0],j=i[1],d=function(){var t=new FormData;t.set("user_id",e.user.sub),v.a.post("https://moonlit-api.herokuapp.com//update",t).then((function(t){console.log(t.data),c(t.data),t.data.length>0&&e.resetCounter(),j(!1)})).catch((function(e){console.error(e)}))},h=function(t){var n=new FormData;n.set("user_id",e.user.sub),n.set("ticker",o[t].ticker),c((function(e){return e.splice(t,1),e})),v.a.post("https://moonlit-api.herokuapp.com//remove",n)};return Object(r.useEffect)((function(){d(),setInterval(d,"45000")}),[]),s?Object(g.jsx)(u.a,{sx:{color:"#FFFFFF",textAlign:"center"},children:Object(g.jsx)(p.a,{variant:"h5",children:"Loading stocks..."})}):Object(g.jsxs)(I.a,{container:!0,spacing:2,justifyContent:"center",children:[o.map((function(e,t){return Object(g.jsx)(I.a,{item:!0,children:Object(g.jsx)(z,{id:t,ticker:e.ticker,name:e.name,currentPrice:e.price,priceChange:e.change,removeStock:h})},t)})),0===o.length&&Object(g.jsxs)(u.a,{sx:{color:"#aaaaaa"},children:[Object(g.jsx)(p.a,{variant:"h4",children:"Nothing here!"}),Object(g.jsx)(p.a,{variant:"overline",children:"Try adding some stocks using the button in the bottom right!"})]}),Object(g.jsx)(V,{user:e.user,newTicker:function(e){c(e),d()}})]})},Y=function(e){return e.isLoggedIn?Object(g.jsx)(X,{user:e.user,resetCounter:e.resetCounter}):Object(g.jsx)(D,{loginUser:e.loginUser})},Z=function(){var e=Object(r.useState)(!0),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(0),a=Object(l.a)(c,2),i=a[0],s=a[1],j=Object(r.useState)({}),d=Object(l.a)(j,2),h=d[0],b=d[1];Object(k.a)(v.a,{retries:999,retryDelay:function(e){return 1e3*e}});var O=function(){s((function(e){return e<100?e+=5:e}))},p=null,x=function(e){b(e)};return Object(r.useEffect)((function(){v.a.get("https://moonlit-api.herokuapp.com/").then((function(e){console.log("CONNECTED!"),console.log(e.data),o(!1)})).catch((function(e){console.error(e)}))}),[]),n?Object(g.jsx)("h1",{children:"Loading..."}):Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(f,{updateProgress:i,user:h,isLoggedIn:!h||0!==Object.keys(h).length,loginUser:x}),Object(g.jsx)(u.a,{maxWidth:"none",sx:{paddingTop:"2em"},children:Object(g.jsx)(Y,{isLoggedIn:!h||0!==Object.keys(h).length,loginUser:x,user:h,resetCounter:function(){null!==p&&(clearInterval(p),p=null),s(10),p=setInterval(O,2250)}})})]})};s.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(Z,{})}),document.getElementById("root"))}},[[139,1,2]]]);
//# sourceMappingURL=main.eec72ac5.chunk.js.map