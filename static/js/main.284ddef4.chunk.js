(this.webpackJsonpmoonlit=this.webpackJsonpmoonlit||[]).push([[0],{117:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);var o,r,c=n(0),a=n.n(c),i=n(34),s=n.n(i),l=(n(117),n(11)),u=n(199),j=n(200),d=n(201),b=n(202),h=n(196),O=n(197),x=n(60),f=n(1),p=function(e){var t=Object(x.useGoogleLogout)({clientId:"391415236751-30bjtlsn5mifvrq6t4f4n7janqa343e6.apps.googleusercontent.com",onLogoutSuccess:function(t){e.loginUser({}),window.location.reload()},onFailure:function(){console.error("LOGOUT FAILED!!!")}}).signOut;return Object(f.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",flex:1},children:0!==Object.keys(e.user).length&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[Object(f.jsxs)(b.a,{variant:"overline",sx:{margin:0},children:["Hello, ",e.user.name||""]}),Object(f.jsx)(h.a,{size:"small",sx:{margin:0},onClick:t,children:"LOGOUT"})]}),Object(f.jsx)(O.a,{src:e.user.picture.slice(0,-6),sx:{marginLeft:"1em",height:"2.5em",width:"2.5em"}})]})})},g=n(203),m=n(14),v=function(e){var t=Object(m.f)();return Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"row",flex:1},children:[Object(f.jsxs)("div",{children:[Object(f.jsx)(b.a,{variant:"h3",sx:{margin:0,cursor:"pointer"},onClick:function(){t("/"),window.location.reload()},children:"Moonlit"}),Object(f.jsx)(b.a,{variant:"subtitle1",sx:{margin:0,color:"#FFD700"},children:"To the moon, To the stars..."})]}),Object(f.jsx)(g.a,{variant:"determinate",value:e.updateProgress,sx:{marginTop:"auto",marginBottom:"auto"}})]})},k=n(25),y=n.n(k),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://moonlit-api.herokuapp.com/"+e},w=function(e){var t=Object(c.useState)({}),n=Object(l.a)(t,2),o=n[0],r=n[1];return Object(c.useEffect)((function(){e.otherUserID&&function(){var t=new FormData;t.set("user_id",e.otherUserID),y.a.post(C("/userinfo"),t).then((function(e){r(e.data)})).catch((function(e){return console.log(e)}))}()}),[]),Object(f.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,flexDirection:"column"},children:0!==Object.keys(o).length&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O.a,{src:o.picture.slice(0,-6),style:{marginBottom:"1vh"}}),Object(f.jsxs)(b.a,{children:["Viewing ",o.name,"'s Portfolio"]})]})})},F=function(e){return Object(f.jsx)(j.a,{position:"sticky",sx:{backgroundColor:"#37425B",padding:"0.25em"},children:Object(f.jsxs)(d.a,{sx:{display:"flex"},children:[Object(f.jsx)(v,{updateProgress:e.updateProgress}),Object(f.jsx)(w,{otherUserID:e.portfolioID}),Object(f.jsx)(p,{user:e.user,loginUser:e.loginUser})]})})},D=n(93),I=n(21),S=n.n(I),L=n(42),T=n(95),U=n.n(T),E=function(e){var t=Object(x.useGoogleLogin)({onSuccess:function(t){var n=function(){var n=Object(L.a)(S.a.mark((function n(){var o;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(o=new FormData).set("token_id",t.tokenId),n.prev=2,n.next=5,y.a.post(C(),o).then((function(t){e.loginUser(t.data),console.log(t.data)}));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(){return n.apply(this,arguments)}}();n(),function(e){var t=1e3*(e.tokenObj.expires_in||3300),n=function(){var o=Object(L.a)(S.a.mark((function o(){var r;return S.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.reloadAuthResponse();case 2:r=o.sent,t=1e3*(r.expires_in||3300),setTimeout(n,t);case 5:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();setTimeout(n,t)}(t)},onFailure:function(e){console.log("LOGIN FAILED"),console.log(e)},clientId:"391415236751-30bjtlsn5mifvrq6t4f4n7janqa343e6.apps.googleusercontent.com",isSignedIn:!0,cookiePolicy:"single_host_origin"}),n=t.signIn;return Object(f.jsxs)(u.a,{children:[Object(f.jsx)(b.a,{variant:"h3",color:"#FFFFFF",children:"Welcome to Moonlit!"}),Object(f.jsx)(b.a,{variant:"subtitle1",color:"#FFFFFF",children:"A place to keep track of all of your stocks."}),Object(f.jsxs)(h.a,{onClick:n,size:"large",variant:"contained",children:[Object(f.jsx)(U.a,{sx:{marginRight:"0.5em"}}),"Login With Google"]})]})},_=n(198),z=n(26),P=n(205),R=n(206),A=n(185),B=n(96),N=n.n(B),G=Object(A.a)(b.a)(o||(o=Object(z.a)(["\n  color: ",";\n"])),(function(e){return e.pricechange>=0?"#18BC9D":"#DF9DC1"})),q=function(e){return Object(f.jsxs)(P.a,{sx:{backgroundColor:"#1D6988",color:"white",textShadow:"1px 1px #333333",width:"100vw",maxWidth:"220px",padding:"1em",position:"relative"},children:[Object(f.jsx)(b.a,{variant:"h4",children:e.ticker}),Object(f.jsx)(b.a,{variant:"caption",children:e.name}),Object(f.jsxs)(G,{variant:"h6",pricechange:e.priceChange,children:["$",e.currentPrice.toFixed(2)||0," (",e.priceChange>0?"+$"+e.priceChange.toFixed(2):"-$"+(-1*e.priceChange).toFixed(2),")"]}),!e.shared&&Object(f.jsx)(R.a,{size:"small",color:"secondary","aria-label":"remove-stock",sx:{position:"absolute",top:10,right:10},onClick:function(){e.removeStock(e.id)},children:Object(f.jsx)(N.a,{})})]})},M=n(5),W=n(191),J=n(30),$=n(97),H=n(190),K=n(192),V=n(195),Q=n(193),X=n(207),Y=n(98),Z=n.n(Y),ee=Object(A.a)(W.a)((r={},Object(M.a)(r,"& .".concat(J.a.root," .").concat(J.a.notchedOutline),{borderColor:"white"}),Object(M.a)(r,"&:hover .".concat(J.a.root," .").concat(J.a.notchedOutline),{borderColor:"white"}),Object(M.a)(r,"& .".concat(J.a.root,".").concat(J.a.focused," .").concat(J.a.notchedOutline),{borderColor:"white"}),Object(M.a)(r,"& .".concat(J.a.input),{color:"white"}),Object(M.a)(r,"&:hover .".concat(J.a.input),{color:"white"}),Object(M.a)(r,"& .".concat(J.a.root,".").concat(J.a.focused," .").concat(J.a.input),{color:"white"}),Object(M.a)(r,"& .".concat($.a.outlined),{color:"white"}),Object(M.a)(r,"&:hover .".concat($.a.outlined),{color:"white"}),Object(M.a)(r,"& .".concat($.a.outlined,".").concat($.a.focused),{color:"white"}),r)),te=function(e){var t=Object(c.useState)(null),n=Object(l.a)(t,2),o=n[0],r=n[1],a=Object(c.useState)(""),i=Object(l.a)(a,2),s=i[0],j=i[1],d=Object(c.useState)(!1),b=Object(l.a)(d,2),O=b[0],x=b[1],p=Object(c.useState)(!1),g=Object(l.a)(p,2),m=g[0],v=g[1],k=Object(c.useState)(!1),w=Object(l.a)(k,2),F=w[0],D=w[1],I=function(){v(!1)},T=function(){var t=Object(L.a)(S.a.mark((function t(){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),(n=new FormData).set("ticker",s),n.set("user_id",e.user.sub),t.next=6,y.a.post(C("/add"),n).then((function(t){"string"!==typeof t.data?(e.newTicker(t.data),D(!0)):D(!1),x(!1)}));case 6:v(!0),j("");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=Boolean(o),E=o?"simple-popover":void 0;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(H.a,{title:"Add Stock",children:Object(f.jsx)(R.a,{size:"medium",color:"primary","aria-label":"add-stock",sx:{position:"fixed",right:20,bottom:20},onClick:function(e){r(e.currentTarget)},children:Object(f.jsx)(Z.a,{})})}),Object(f.jsx)(K.a,{id:E,anchorEl:o,open:U,onClose:function(){r(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:Object(f.jsxs)(u.a,{sx:{backgroundColor:"#343435",padding:"1em 2em",display:"flex",justifyContent:"space-evenly"},children:[Object(f.jsx)(ee,{id:"outlined-basic",label:"Enter Stock Ticker",variant:"outlined",value:s,disabled:O,onChange:function(e){j(e.target.value)},sx:{marginRight:"1em"},onKeyDown:function(e){"Enter"===e.key&&T()}}),Object(f.jsx)(h.a,{variant:"outlined",disabled:O,onClick:T,children:"Add Stock"})]})}),Object(f.jsx)(V.a,{open:m,onClose:I,autoHideDuration:5e3,children:F?Object(f.jsxs)(Q.a,{onClose:I,severity:"success",children:[Object(f.jsx)(X.a,{children:"SUCCESS!!!"}),"Stock was successfully added!"]}):Object(f.jsxs)(Q.a,{onClose:I,severity:"error",children:[Object(f.jsx)(X.a,{children:"ERROR!!!"}),"Stock was NOT FOUND!"]})})]})},ne=n(99),oe=n.n(ne),re=function(e){var t=Object(c.useState)(null),n=Object(l.a)(t,2),o=n[0],r=n[1],a=Boolean(o),i=o?"simple-popover":void 0,s="https://jmmabanta.github.io/moonlit/#/portfolio/"+e.userID;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(H.a,{title:"Share Portfolio Link",children:Object(f.jsx)(R.a,{size:"medium",color:"primary","aria-label":"share-portfolio",sx:{position:"fixed",right:85,bottom:20},onClick:function(e){r(e.currentTarget)},children:Object(f.jsx)(oe.a,{})})}),Object(f.jsx)(K.a,{id:i,anchorEl:o,open:a,onClose:function(){r(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:Object(f.jsxs)(u.a,{sx:{backgroundColor:"#343435",padding:"1em 2em",display:"flex",justifyContent:"space-evenly"},children:[Object(f.jsx)(ee,{id:"outlined-basic",value:s,sx:{marginRight:"1em"}}),Object(f.jsx)(h.a,{variant:"outlined",onClick:function(){navigator.clipboard.writeText(s)},children:"Copy URL"})]})})]})},ce=function(e){var t=Object(c.useState)([]),n=Object(l.a)(t,2),o=n[0],r=n[1],a=Object(c.useState)(!0),i=Object(l.a)(a,2),s=i[0],j=i[1],d=function(){var t=new FormData;t.set("user_id",e.portfolioID||e.user.sub),y.a.post(C("/update"),t).then((function(t){r(t.data),t.data.length>0&&e.resetCounter(),j(!1)})).catch((function(e){console.error(e)}))},h=function(t){var n=new FormData;n.set("user_id",e.user.sub),n.set("ticker",o[t].ticker),r((function(e){return e.splice(t,1),e})),y.a.post(C("/remove"),n)};return Object(c.useEffect)((function(){d(),setInterval(d,"45000")}),[]),s?Object(f.jsx)(u.a,{sx:{color:"#FFFFFF",textAlign:"center"},children:Object(f.jsx)(b.a,{variant:"h5",children:"Loading stocks..."})}):Object(f.jsxs)(_.a,{container:!0,spacing:2,justifyContent:"center",children:[o.map((function(t,n){return Object(f.jsx)(_.a,{item:!0,children:Object(f.jsx)(q,{id:n,ticker:t.ticker,name:t.name,currentPrice:t.price,priceChange:t.change,removeStock:h,shared:e.portfolioID})},n)})),0===o.length&&Object(f.jsxs)(u.a,{sx:{color:"#aaaaaa"},children:[Object(f.jsx)(b.a,{variant:"h4",children:"Nothing here!"}),!e.portfolioID&&Object(f.jsx)(b.a,{variant:"overline",children:"Try adding some stocks using the button in the bottom right!"})]}),!e.portfolioID&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(re,{userID:e.user.sub}),Object(f.jsx)(te,{user:e.user,newTicker:function(e){r(e),d()}})]})]})},ae=function(e){return e.isLoggedIn||e.portfolioID?Object(f.jsx)(ce,{user:e.user,resetCounter:e.resetCounter,portfolioID:e.portfolioID}):Object(f.jsx)(E,{loginUser:e.loginUser})},ie=function(){return Object(f.jsx)("div",{style:{position:"fixed",bottom:5,color:"#aaaaaa"},children:Object(f.jsxs)(b.a,{variant:"overline",children:["\xa9 2021 John Mabanta \xb7"," ",Object(f.jsx)("a",{href:"https://github.com/jmmabanta/moonlit",target:"_blank",rel:"noreferrer",style:{color:"#aaaaaa"},children:"SOURCE CODE"})]})})},se=function(){var e=Object(m.g)(),t=Object(c.useState)(!0),n=Object(l.a)(t,2),o=n[0],r=n[1],a=Object(c.useState)(0),i=Object(l.a)(a,2),s=i[0],j=i[1],d=Object(c.useState)({}),b=Object(l.a)(d,2),h=b[0],O=b[1];Object(D.a)(y.a,{retries:999,retryDelay:function(e){return 1e3*e}});var x=function(){j((function(e){return e<100?e+=5:e}))},p=null,g=function(e){O(e)};return Object(c.useEffect)((function(){y.a.get(C()).then((function(e){console.log("CONNECTED!"),console.log(e.data),r(!1)})).catch((function(e){console.error(e)}))}),[]),o?Object(f.jsx)("h1",{children:"Loading..."}):Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(F,{updateProgress:s,user:h,portfolioID:e.id,isLoggedIn:!h||0!==Object.keys(h).length,loginUser:g}),Object(f.jsxs)(u.a,{maxWidth:"none",sx:{paddingTop:"2em"},children:[Object(f.jsx)(ae,{isLoggedIn:!h||0!==Object.keys(h).length,loginUser:g,user:h,resetCounter:function(){null!==p&&(clearInterval(p),p=null),j(10),p=setInterval(x,2250)},portfolioID:e.id}),Object(f.jsx)(ie,{})]})]})},le=n(58);s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(le.a,{basename:"/",children:Object(f.jsx)(m.c,{children:["/","/portfolio/:id"].map((function(e,t){return Object(f.jsx)(m.a,{path:e,element:Object(f.jsx)(se,{})},t)}))})})}),document.getElementById("root"))}},[[142,1,2]]]);
//# sourceMappingURL=main.284ddef4.chunk.js.map